<!DOCTYPE html>
<html lang="az" id="htmlTag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Premium Drive - Play & Earn</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
      { "imports": { "@google/generative-ai": "https://esm.run/@google/generative-ai" } }
    </script>
    <style>
        body { user-select: none; -webkit-user-select: none; touch-action: none; overflow: hidden; background-color: #020617; font-family: 'Inter', sans-serif; transition: direction 0.3s ease; } 
        .hidden { display: none !important; }
        
        [dir="rtl"] { font-family: 'Tajawal', 'Arial', sans-serif; }
        [dir="rtl"] .text-left { text-align: right; }
        [dir="rtl"] .pl-4 { padding-right: 1rem; padding-left: 0; }
        [dir="rtl"] .right-4 { right: auto; left: 1rem; }
        [dir="rtl"] .right-0 { right: auto; left: 0; }
        
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        .neon-cyan { text-shadow: 0 0 10px rgba(34, 211, 238, 0.8); }
        .neon-emerald { text-shadow: 0 0 10px rgba(16, 185, 129, 0.8); }
        .neon-rose { text-shadow: 0 0 10px rgba(244, 63, 94, 0.8); }
        .neon-box-cyan { box-shadow: 0 0 20px rgba(34, 211, 238, 0.15); }
        .brake-shadow { box-shadow: 0 0 40px rgba(225, 29, 72, 0.6); }
        
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(34,211,238,0.3); border-radius: 10px; }

        @keyframes shake {
            0%, 100% { transform: translate(0, 0); }
            20% { transform: translate(-3px, 2px); }
            40% { transform: translate(3px, -2px); }
            60% { transform: translate(-3px, -2px); }
            80% { transform: translate(3px, 2px); }
        }
        .shake-effect { animation: shake 0.3s; }
    </style>
</head>
<body class="text-white h-screen flex flex-col font-sans relative transition-all duration-300" dir="ltr">

    <div class="fixed top-4 right-4 z-[9999]">
        <div id="langBtn" class="glass-panel px-3 py-2 rounded-[16px] flex items-center gap-2 cursor-pointer border border-white/10 active:scale-95 transition-transform bg-[#020617]/80">
            <span id="currentFlag">ğŸ‡¦ğŸ‡¿</span> <span id="currentLangName" class="text-xs font-bold uppercase">AZ</span>
        </div>
        <div id="langDropdown" class="hidden absolute top-full right-0 mt-2 p-2 glass-panel rounded-[16px] flex flex-col gap-1 w-36 border border-white/10 bg-[#020617]/95">
            </div>
    </div>

    <div id="registrationScreen" class="h-screen flex items-center justify-center p-6 z-[60] absolute inset-0 bg-[#020617] overflow-y-auto">
        <div class="glass-panel p-6 sm:p-8 rounded-[32px] w-full max-w-md relative overflow-hidden my-auto mt-16">
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-cyan-500/10 rounded-full blur-[40px]"></div>
            
            <h2 class="text-2xl font-black mb-4 neon-cyan text-center" data-i18n="regTitle">Qeydiyyat & Qaydalar</h2>
            
            <div class="bg-[#0f172a]/80 p-4 rounded-[20px] mb-6 border border-white/5 text-[11px] sm:text-xs text-slate-300 space-y-2 max-h-40 overflow-y-auto custom-scrollbar text-left">
                <p class="text-rose-400 font-bold mb-1" data-i18n="regAttention">DÄ°QQÆT - Vacib Qaydalar:</p>
                <ul class="list-disc pl-4 space-y-1.5">
                    <li data-i18n="rule1">HÉ™r bir istifadÉ™Ã§i yalnÄ±z <b>1 dÉ™fÉ™</b> qeydiyyatdan keÃ§É™ bilÉ™r.</li>
                    <li data-i18n="rule2">Eyni cihazdan birdÉ™n Ã§ox hesab yaradÄ±larsa, sistem avtomatik aÅŸkarlayÄ±b <b>ban edÉ™cÉ™k</b>.</li>
                    <li data-i18n="rule3">Qeydiyyatdan sonra "BalansÄ± ArtÄ±r" bÃ¶lmÉ™sindÉ™ "Ã–dÉ™niÅŸi Yoxla" dÃ¼ymÉ™sinÉ™ basaraq <b>0.50 AZN</b> baÅŸlanÄŸÄ±c hÉ™diyyÉ™nizi ala bilÉ™rsiniz.</li>
                    <li data-i18n="rule4">Qaydalara riayÉ™t edÉ™rÉ™k qazanc É™ldÉ™ edÉ™ bilÉ™rsiniz.</li>
                    <li data-i18n="rule5">Oyuna davam etmÉ™k Ã¼Ã§Ã¼n balans bitdikdÉ™ mÃ¼tlÉ™q artÄ±rmalÄ±sÄ±nÄ±z.</li>
                </ul>
                <p class="text-emerald-400 font-bold mt-3 text-center text-sm" data-i18n="regWish">Oyunda sizÉ™ uÄŸurlar arzulayÄ±rÄ±q! ğŸ</p>
            </div>

            <form id="regForm" class="flex flex-col gap-3 relative z-10">
                <input type="text" id="regName" data-i18n="phName" placeholder="Ad vÉ™ Soyad" required class="w-full p-3 rounded-xl bg-[#020617] border border-slate-700 text-white outline-none focus:border-cyan-500 text-sm">
                <input type="text" id="regUsername" data-i18n="phUsername" placeholder="Ä°stifadÉ™Ã§i adÄ±" required class="w-full p-3 rounded-xl bg-[#020617] border border-slate-700 text-white outline-none focus:border-cyan-500 text-sm">
                <input type="number" id="regAge" data-i18n="phAge" placeholder="YaÅŸ" required min="10" max="99" class="w-full p-3 rounded-xl bg-[#020617] border border-slate-700 text-white outline-none focus:border-cyan-500 text-sm">
                <input type="password" id="regPassword" data-i18n="phPass" placeholder="ÅifrÉ™" required minlength="6" class="w-full p-3 rounded-xl bg-[#020617] border border-slate-700 text-white outline-none focus:border-cyan-500 text-sm">
                
                <button type="submit" data-i18n="btnReg" class="w-full py-4 mt-2 bg-cyan-500/20 border border-cyan-500/50 text-cyan-300 rounded-[24px] font-bold uppercase tracking-widest shadow-[0_0_15px_rgba(34,211,238,0.2)] active:scale-95 transition-all">QeydiyyatÄ± Tamamla</button>
            </form>
        </div>
    </div>

    <div id="loginScreen" class="h-screen flex items-center justify-center p-6 z-50 absolute inset-0 bg-[#020617] hidden">
        <div class="glass-panel p-10 rounded-[32px] w-full max-w-sm text-center relative overflow-hidden">
            <div class="absolute -top-10 -left-10 w-32 h-32 bg-cyan-500/20 rounded-full blur-[40px]"></div>
            
            <h1 class="text-3xl font-black text-white italic mb-2 tracking-tighter neon-cyan relative z-10">PREMIUM DRIVE</h1>
            <p class="text-slate-400 text-sm mb-8 relative z-10"><span id="lbl_loginBalance" data-i18n="lblLoginBal">Cari Balans:</span> <span id="loginBalanceText" class="font-bold text-cyan-400 neon-cyan">0.00</span></p>
            
            <button id="loginBtn" data-i18n="btnPlay" class="w-full py-4 bg-cyan-500/20 border border-cyan-500/50 text-cyan-300 rounded-[24px] font-bold uppercase tracking-widest shadow-[0_0_15px_rgba(34,211,238,0.2)] active:scale-95 transition-all relative z-10">
                Oyuna BaÅŸla
            </button>
            <button id="loginTopupBtn" data-i18n="btnTopup" class="w-full mt-4 py-4 glass-panel rounded-[24px] text-white font-bold uppercase tracking-widest active:scale-95 transition-all relative z-10 border border-white/10">
                BalansÄ± ArtÄ±r
            </button>
        </div>
    </div>

    <div id="gameScreen" class="hidden h-screen flex flex-col relative overflow-hidden bg-[#020617]">
        <div class="p-4 flex justify-between items-center z-30 shrink-0">
            <div class="flex gap-2">
                <div class="glass-panel p-2 px-4 rounded-[20px] transition-all" id="balanceBox">
                    <p id="lbl_hudBalance" data-i18n="garBal" class="text-[9px] font-black text-cyan-400 uppercase tracking-[2px] mb-0.5 opacity-80">Balans</p>
                    <p id="balanceText" class="text-base font-black neon-cyan">0.00</p>
                </div>
                <div class="glass-panel p-2 px-4 rounded-[20px]">
                    <p id="lbl_hudDistance" data-i18n="lblDist" class="text-[9px] font-black text-emerald-400 uppercase tracking-[2px] mb-0.5 opacity-80">MÉ™safÉ™</p>
                    <p id="scoreText" class="text-base font-black neon-emerald">0 M</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button id="withdrawBtn" class="w-12 h-12 bg-cyan-500/20 border border-cyan-500/50 text-cyan-400 rounded-[20px] flex items-center justify-center text-xl shadow-[0_0_15px_rgba(34,211,238,0.2)] active:scale-95 transition-all">ğŸ’¸</button>
                <button id="garageBtn" class="w-12 h-12 bg-indigo-500/20 border border-indigo-500/50 text-indigo-400 rounded-[20px] flex items-center justify-center text-xl shadow-[0_0_15px_rgba(99,102,241,0.2)] active:scale-95 transition-all">ğŸ›’</button>
                <button id="topupBtn" class="w-12 h-12 bg-[#FFDD00]/20 border border-[#FFDD00]/50 text-[#FFDD00] rounded-[20px] flex items-center justify-center text-xl shadow-[0_0_15px_rgba(255,221,0,0.2)] active:scale-95 transition-all">â˜•</button>
            </div>
        </div>

        <div class="px-4 z-30 mb-2 shrink-0">
            <div class="glass-panel border-blue-500/30 rounded-[20px] p-3 text-xs text-blue-100 flex items-center gap-3">
                <div class="w-7 h-7 rounded-full bg-blue-500/20 flex items-center justify-center border border-blue-500/40 shadow-[0_0_10px_rgba(59,130,246,0.5)] shrink-0"><span id="aiIcon" class="text-[10px]">ğŸ¤–</span></div>
                <span id="aiTipText" data-i18n="aiTipLoad" class="truncate w-full italic font-light">SÃ¼ni intellekt mÉ™slÉ™hÉ™ti yÃ¼klÉ™nir...</span>
            </div>
        </div>

        <div class="flex-1 w-full max-w-[400px] mx-auto relative glass-panel neon-box-cyan rounded-[40px] overflow-hidden z-10 flex shrink" id="gameContainer">
            <canvas id="gameCanvas" width="400" height="600" class="w-full h-full object-contain bg-[#0f172a]"></canvas>
            <div class="absolute inset-0 flex">
                <div id="laneLeft" class="flex-1 active:bg-white/5 cursor-pointer"></div>
                <div id="laneRight" class="flex-1 active:bg-white/5 cursor-pointer"></div>
            </div>
            
            <div id="gameOverScreen" class="hidden absolute inset-0 bg-[#020617]/90 backdrop-blur-xl flex-col items-center justify-center p-8 text-center z-40">
                <div class="w-20 h-20 rounded-full bg-rose-500/20 flex items-center justify-center mb-4 blur-[2px] mx-auto"><span class="text-4xl">âš ï¸</span></div>
                <h2 class="text-3xl font-black text-rose-500 mb-2 neon-rose tracking-wider" data-i18n="goTitle">GAME OVER</h2>
                <p class="text-slate-400 text-sm mb-2"><span data-i18n="lblDist">MÉ™safÉ™</span>: <span id="finalScore" class="font-bold text-white">0</span> M</p>
                
                <div id="gameOverMessage" class="hidden mb-6 bg-rose-500/10 p-4 rounded-xl border border-rose-500/30 text-left">
                    <p class="text-rose-400 text-sm font-bold mb-1" data-i18n="goMsgTitle">BalansÄ±nÄ±z 0.00 oldu!</p>
                    <p class="text-slate-300 text-xs" data-i18n="goMsgDesc">CÉ™rimÉ™lÉ™r sÉ™bÉ™bindÉ™n balansÄ±nÄ±z bitdi. Oyuna davam etmÉ™k vÉ™ yenidÉ™n qazanmaq Ã¼Ã§Ã¼n mÃ¼tlÉ™q balansÄ±nÄ±zÄ± artÄ±rmalÄ±sÄ±nÄ±z. HeÃ§ bir ikinci ÅŸans verilmir.</p>
                </div>
                
                <button id="restartBtn" data-i18n="btnRestart" class="w-full py-4 bg-cyan-500/20 border border-cyan-500/50 text-cyan-300 rounded-[24px] font-bold uppercase tracking-widest shadow-[0_0_15px_rgba(34,211,238,0.2)] mb-4 active:scale-95 transition-all">YENÄ°DÆN BAÅLA</button>
                <button id="gameOverTopupBtn" data-i18n="btnGoTopup" class="hidden w-full py-4 bg-[#FFDD00] text-black rounded-[24px] font-bold uppercase tracking-widest shadow-[0_0_15px_rgba(255,221,0,0.3)] mb-4 active:scale-95 transition-all flex items-center justify-center gap-2">BALANSI ARTIR</button>
            </div>
        </div>

        <div class="w-full max-w-[400px] mx-auto p-4 pb-6 shrink-0 z-20">
            <button id="brakeBtn" data-i18n="btnBrake" class="w-full py-6 rounded-[32px] text-3xl font-black tracking-widest transition-all bg-rose-600 border-4 border-rose-800 text-white brake-shadow active:bg-rose-500 active:scale-95 touch-manipulation">TORMOZ</button>
        </div>
    </div>

    <div id="topUpModal" class="hidden absolute inset-0 bg-[#020617]/90 backdrop-blur-2xl flex items-center justify-center p-6 z-[100] overflow-y-auto">
        <div class="glass-panel p-6 rounded-[40px] text-center w-full max-w-md relative overflow-hidden my-auto">
            <h2 class="text-2xl font-black mb-4 neon-emerald relative z-10" data-i18n="tuTitle">BalansÄ± ArtÄ±r</h2>
            <div class="text-slate-300 text-xs mb-6 relative z-10 space-y-3 text-left bg-[#0f172a]/80 p-4 rounded-[20px] border border-white/5 shadow-inner">
                <p class="flex items-start gap-2"><span class="text-emerald-400 mt-0.5">âœ”</span><span data-i18n="tuRule1">Balans artÄ±rmaq Ã¼Ã§Ã¼n linkÉ™ daxil olaraq Ã¶dÉ™niÅŸ edin.</span></p>
                <p class="flex items-start gap-2"><span class="text-emerald-400 mt-0.5">âœ”</span><span data-i18n="tuRule2">Ã–dÉ™niÅŸ tÉ™sdiqlÉ™ndikdÉ™n sonra mÉ™blÉ™ÄŸ oyun balansÄ±nÄ±za É™lavÉ™ olunacaq vÉ™ davam edÉ™ bilÉ™cÉ™ksiniz.</span></p>
                <p class="flex items-start gap-2"><span class="text-rose-400 mt-0.5">âš ï¸</span><span data-i18n="tuRule3">SÄ±fÄ±r balansla oyuna baÅŸlamaq qadaÄŸandÄ±r. Ä°kinci ÅŸans verilmir.</span></p>
            </div>
            <button id="buyMeCoffeeBtn" class="w-full py-4 bg-[#FFDD00] text-black rounded-[24px] font-black shadow-[0_0_20px_rgba(255,221,0,0.3)] mb-4 active:scale-95 transition-all relative z-10 flex items-center justify-center gap-3 text-lg"><span class="text-2xl">â˜•</span> <span data-i18n="btnPay">Ã–dÉ™niÅŸ Et</span></button>
            <button id="verifyPaymentBtn" data-i18n="btnVerify" class="w-full py-3 bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 rounded-[24px] font-bold mb-4 active:scale-95 transition-all relative z-10 text-sm flex items-center justify-center gap-2">ğŸ”„ Ã–dÉ™niÅŸi Yoxla</button>
            <button id="closeTopUpBtn" data-i18n="btnClose" class="text-slate-400 text-[12px] font-bold uppercase tracking-widest active:text-white transition-all relative z-10">BaÄŸla</button>
        </div>
    </div>

    <div id="withdrawModal" class="hidden absolute inset-0 bg-[#020617]/90 backdrop-blur-2xl flex items-center justify-center p-6 z-[100]">
        <div class="glass-panel p-8 rounded-[40px] text-center w-full max-w-sm relative overflow-hidden">
            <h2 class="text-2xl font-black mb-2 neon-cyan relative z-10" data-i18n="wdTitle">NaÄŸdlaÅŸdÄ±r</h2>
            <div class="bg-[#0f172a] p-4 rounded-2xl mb-6 border border-white/5 relative z-10">
                <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1" data-i18n="wdCurBal">Cari BalansÄ±nÄ±z</p>
                <p id="withdrawBalanceDisplay" class="text-2xl font-black text-cyan-400 neon-cyan">0.00</p>
            </div>
            <form id="withdrawForm" action="#" method="POST" class="flex flex-col gap-3 relative z-10">
                <input type="text" id="wdName" data-i18n="wdPhName" placeholder="Ad vÉ™ SoyadÄ±nÄ±z" required class="w-full p-4 rounded-2xl bg-[#020617] border border-slate-700 text-white outline-none focus:border-cyan-500 text-sm">
                <input type="text" id="wdCard" data-i18n="wdPhCard" placeholder="Kart vÉ™ ya Hesab NÃ¶mrÉ™si" required class="w-full p-4 rounded-2xl bg-[#020617] border border-slate-700 text-white outline-none focus:border-cyan-500 text-sm">
                <p id="withdrawWarning" data-i18n="wdWarn" class="text-rose-500 text-xs font-bold mt-1 hidden">BalansÄ±nÄ±z minimum limitdÉ™n azdÄ±r.</p>
                <button type="submit" id="submitWithdrawBtn" data-i18n="btnSubmitWd" class="w-full py-4 mt-2 bg-cyan-500/20 border border-cyan-500/50 text-cyan-400 rounded-[24px] font-bold uppercase tracking-widest shadow-[0_0_15px_rgba(34,211,238,0.2)] active:scale-95 transition-all">SorÄŸu GÃ¶ndÉ™r</button>
            </form>
            <button id="closeWithdrawBtn" data-i18n="btnBack" class="text-slate-400 text-[12px] font-bold uppercase tracking-widest mt-6 active:text-white transition-all relative z-10">Geri</button>
        </div>
    </div>

    <div id="garageModal" class="hidden absolute inset-0 bg-[#020617]/90 backdrop-blur-2xl flex flex-col items-center justify-center p-6 z-[100]">
        <div class="glass-panel p-6 rounded-[32px] w-full max-w-sm relative overflow-hidden flex flex-col max-h-[90%]">
            <div class="flex justify-between items-center mb-6 relative z-10">
                <h2 class="text-2xl font-black neon-cyan italic" data-i18n="garTitle">QARAJ</h2>
                <div class="text-right">
                    <p class="text-[10px] text-cyan-400 uppercase tracking-widest" data-i18n="garBal">Balans</p>
                    <p id="garageBalanceText" class="text-sm font-bold neon-cyan">0.00</p>
                </div>
            </div>
            <div id="garageList" class="flex-1 overflow-y-auto pr-2 space-y-4 relative z-10 custom-scrollbar"></div>
            <button id="closeGarageBtn" data-i18n="btnClose" class="w-full mt-6 py-4 glass-panel rounded-[20px] text-slate-300 font-bold uppercase tracking-widest active:scale-95 transition-all relative z-10">BaÄŸla</button>
        </div>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";

        // ==========================================
        // ğŸŒ MULTI-LANGUAGE & CURRENCY CONFIGURATION
        // ==========================================
        const LANGUAGES = {
            az: { 
                code: 'az', flag: 'ğŸ‡¦ğŸ‡¿', name: 'AzÉ™rbaycanca', currency: 'AZN', rate: 1, tts: 'tr-TR', aiLang: 'Azerbaijani', dir: 'ltr',
                t: {
                    regTitle: "Qeydiyyat & Qaydalar", regAttention: "DÄ°QQÆT - Vacib Qaydalar:",
                    rule1: "HÉ™r bir istifadÉ™Ã§i yalnÄ±z <b>1 dÉ™fÉ™</b> qeydiyyatdan keÃ§É™ bilÉ™r.",
                    rule2: "Eyni cihazdan birdÉ™n Ã§ox hesab yaradÄ±larsa, sistem avtomatik aÅŸkarlayÄ±b <b>ban edÉ™cÉ™k</b>.",
                    rule3: "Qeydiyyatdan sonra 'BalansÄ± ArtÄ±r' bÃ¶lmÉ™sindÉ™ 'Ã–dÉ™niÅŸi Yoxla' edÉ™rÉ™k <b>0.50 AZN</b> baÅŸlanÄŸÄ±c hÉ™diyyÉ™nizi ala bilÉ™rsiniz.",
                    rule4: "Qaydalara riayÉ™t edÉ™rÉ™k qazanc É™ldÉ™ edÉ™ bilÉ™rsiniz.",
                    rule5: "Oyuna davam etmÉ™k Ã¼Ã§Ã¼n balans bitdikdÉ™ mÃ¼tlÉ™q artÄ±rmalÄ±sÄ±nÄ±z.",
                    regWish: "Oyunda sizÉ™ uÄŸurlar arzulayÄ±rÄ±q! ğŸ", phName: "Ad vÉ™ Soyad", phUsername: "Ä°stifadÉ™Ã§i adÄ±", phAge: "YaÅŸ", phPass: "ÅifrÉ™",
                    btnReg: "QeydiyyatÄ± Tamamla", lblLoginBal: "Cari Balans:", btnPlay: "Oyuna BaÅŸla", btnTopup: "BalansÄ± ArtÄ±r",
                    garBal: "Balans", lblDist: "MÉ™safÉ™", aiTipLoad: "SÃ¼ni intellekt mÉ™slÉ™hÉ™ti yÃ¼klÉ™nir...",
                    goTitle: "GAME OVER", goMsgTitle: "BalansÄ±nÄ±z sÄ±fÄ±rlandÄ±!", goMsgDesc: "CÉ™rimÉ™lÉ™r sÉ™bÉ™bindÉ™n balansÄ±nÄ±z bitdi. Oyuna davam etmÉ™k vÉ™ yenidÉ™n qazanmaq Ã¼Ã§Ã¼n mÃ¼tlÉ™q balansÄ±nÄ±zÄ± artÄ±rmalÄ±sÄ±nÄ±z. HeÃ§ bir ikinci ÅŸans verilmir.",
                    btnRestart: "YENÄ°DÆN BAÅLA", btnGoTopup: "BALANSI ARTIR", btnBrake: "TORMOZ",
                    tuTitle: "BalansÄ± ArtÄ±r", tuRule1: "Balans artÄ±rmaq Ã¼Ã§Ã¼n (buymeacoffee.com/surwin) minimum <b>3 AZN</b> ekvivalenti Ã¶dÉ™niÅŸ edin.", tuRule2: "Ã–dÉ™niÅŸ tÉ™sdiqlÉ™ndikdÉ™n sonra mÉ™blÉ™ÄŸ oyun balansÄ±nÄ±za É™lavÉ™ olunacaq.", tuRule3: "SÄ±fÄ±r balansla oyuna baÅŸlamaq qadaÄŸandÄ±r. Ä°kinci ÅŸans verilmir.",
                    btnPay: "Ã–dÉ™niÅŸ Et", btnVerify: "Ã–dÉ™niÅŸi Yoxla", btnClose: "BaÄŸla",
                    wdTitle: "NaÄŸdlaÅŸdÄ±r", wdCurBal: "Cari BalansÄ±nÄ±z", wdPhName: "Ad vÉ™ SoyadÄ±nÄ±z", wdPhCard: "Kart vÉ™ ya Hesab NÃ¶mrÉ™si", wdWarn: "BalansÄ±nÄ±z minimum limitdÉ™n (30 AZN) azdÄ±r.", btnSubmitWd: "SorÄŸu GÃ¶ndÉ™r", btnBack: "Geri", garTitle: "QARAJ",
                    btnSelected: "SeÃ§ilib", btnSelect: "SeÃ§", btnBuy: "Al",
                    aiScenStart: "Oyuna baÅŸlayÄ±r. HÉ™vÉ™slÉ™ndir.", aiScenEmpty: "BalansÄ± bitib, artÄ±rmalÄ±dÄ±r.", aiScenRed: "QÄ±rmÄ±zÄ± iÅŸÄ±qda keÃ§di cÉ™rimÉ™lÉ™ndi.", aiScenGreen: "YaÅŸÄ±l iÅŸÄ±qdan keÃ§di, qazandÄ±, nitro!", aiScenCrash: "QÉ™za etdi, cÉ™rimÉ™lÉ™ndi.", aiScenNear: "TÉ™hlÃ¼kÉ™li keÃ§iÅŸ etdi, qazandÄ±.", aiScenPoliceRun: "PolisdÉ™n qaÃ§dÄ±, cÉ™rimÉ™!", aiScenPoliceEarly: "Polis get demÉ™miÅŸ getdi, cÉ™rimÉ™.", aiScenPoliceOk: "Polis yoxladÄ±, getdi, qazandÄ±."
                }
            },
            en: { 
                code: 'en', flag: 'ğŸ‡¬ğŸ‡§', name: 'English', currency: 'USD', rate: 0.59, tts: 'en-US', aiLang: 'English', dir: 'ltr',
                t: {
                    regTitle: "Registration & Rules", regAttention: "ATTENTION - Important Rules:",
                    rule1: "Each user can register only <b>1 time</b>.",
                    rule2: "Multiple accounts from the same device will be <b>automatically blocked</b>.",
                    rule3: "After registration, go to 'Top Up' and click 'Verify Payment' to claim your <b>0.50 AZN</b> starting bonus.",
                    rule4: "You can earn by following the platform rules.",
                    rule5: "If your balance reaches zero, you must top up to continue.",
                    regWish: "We wish you success in the game! ğŸ", phName: "Full Name", phUsername: "Username", phAge: "Age", phPass: "Password",
                    btnReg: "Complete Registration", lblLoginBal: "Current Balance:", btnPlay: "Start Game", btnTopup: "Top Up Balance",
                    garBal: "Balance", lblDist: "Distance", aiTipLoad: "Loading AI advice...",
                    goTitle: "GAME OVER", goMsgTitle: "Balance reached zero!", goMsgDesc: "Your balance is empty due to penalties. You must top up to continue and earn again. No second chances are given.",
                    btnRestart: "RESTART", btnGoTopup: "TOP UP BALANCE", btnBrake: "BRAKE",
                    tuTitle: "Top Up Balance", tuRule1: "Make a payment of min. <b>$2 USD</b> via link (buymeacoffee.com/surwin) to top up.", tuRule2: "Once verified, the amount will be added to your balance.", tuRule3: "Playing with zero balance is strictly forbidden. No second chance.",
                    btnPay: "Pay Now", btnVerify: "Verify Payment", btnClose: "Close",
                    wdTitle: "Withdraw", wdCurBal: "Current Balance", wdPhName: "Full Name", wdPhCard: "Card or Account Number", wdWarn: "Balance is below the minimum limit.", btnSubmitWd: "Submit Request", btnBack: "Back", garTitle: "GARAGE",
                    btnSelected: "Selected", btnSelect: "Select", btnBuy: "Buy",
                    aiScenStart: "Starts the game. Encourage them.", aiScenEmpty: "Balance is empty, needs top up.", aiScenRed: "Ran a red light, penalized.", aiScenGreen: "Green light, rewarded, nitro!", aiScenCrash: "Crashed, penalized.", aiScenNear: "Near miss, rewarded.", aiScenPoliceRun: "Ran from police, penalized!", aiScenPoliceEarly: "Moved before police said go, penalized.", aiScenPoliceOk: "Police checked and cleared, rewarded."
                }
            },
            ru: { 
                code: 'ru', flag: 'ğŸ‡·ğŸ‡º', name: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', currency: 'RUB', rate: 55.0, tts: 'ru-RU', aiLang: 'Russian', dir: 'ltr',
                t: {
                    regTitle: "Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°", regAttention: "Ğ’ĞĞ˜ĞœĞĞĞ˜Ğ• - Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°:",
                    rule1: "ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ <b>1 Ñ€Ğ°Ğ·</b>.",
                    rule2: "ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ñ‹ Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğ±ÑƒĞ´ÑƒÑ‚ <b>Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹</b>.",
                    rule3: "ĞŸĞ¾ÑĞ»Ğµ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ·Ğ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² 'ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ' Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ 'ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ', Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ğ½ÑƒÑ <b>0.50 AZN</b>.",
                    rule4: "Ğ¡Ğ¾Ğ±Ğ»ÑĞ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ·Ğ°Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ.",
                    rule5: "ĞŸÑ€Ğ¸ Ğ½ÑƒĞ»ĞµĞ²Ğ¾Ğ¼ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞµ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ñ.",
                    regWish: "Ğ–ĞµĞ»Ğ°ĞµĞ¼ ÑƒĞ´Ğ°Ñ‡Ğ¸ Ğ² Ğ¸Ğ³Ñ€Ğµ! ğŸ", phName: "Ğ˜Ğ¼Ñ Ğ¸ Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ", phUsername: "Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ", phAge: "Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚", phPass: "ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ",
                    btnReg: "Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ", lblLoginBal: "Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ:", btnPlay: "ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñƒ", btnTopup: "ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ",
                    garBal: "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ", lblDist: "Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ", aiTipLoad: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞ¾Ğ²ĞµÑ‚Ğ° Ğ˜Ğ˜...",
                    goTitle: "Ğ˜Ğ“Ğ Ğ ĞĞšĞĞĞ§Ğ•ĞĞ", goMsgTitle: "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ñ€Ğ°Ğ²ĞµĞ½ Ğ½ÑƒĞ»Ñ!", goMsgDesc: "Ğ’Ğ°Ñˆ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¸ÑÑ‡ĞµÑ€Ğ¿Ğ°Ğ½ Ğ¸Ğ·-Ğ·Ğ° ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ². ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ñ. Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğ³Ğ¾ ÑˆĞ°Ğ½ÑĞ° Ğ½ĞµÑ‚.",
                    btnRestart: "ĞĞĞ§ĞĞ¢Ğ¬ Ğ—ĞĞĞĞ’Ğ", btnGoTopup: "ĞŸĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ¬ Ğ‘ĞĞ›ĞĞĞ¡", btnBrake: "Ğ¢ĞĞ ĞœĞĞ—",
                    tuTitle: "ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ", tuRule1: "Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ ÑĞ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ Ğ¾Ñ‚ <b>$2 USD</b> Ğ¿Ğ¾ ÑÑÑ‹Ğ»ĞºĞµ (buymeacoffee.com/surwin).", tuRule2: "ĞŸĞ¾ÑĞ»Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑÑƒĞ¼Ğ¼Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ½Ğ° Ğ²Ğ°Ñˆ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ.", tuRule3: "Ğ˜Ğ³Ñ€Ğ° Ñ Ğ½ÑƒĞ»ĞµĞ²Ñ‹Ğ¼ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¾Ğ¼ Ğ·Ğ°Ğ¿Ñ€ĞµÑ‰ĞµĞ½Ğ°. ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Ğ²Ñ‚Ğ¾Ñ€Ñ‹Ñ… ÑˆĞ°Ğ½ÑĞ¾Ğ².",
                    btnPay: "ĞĞ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ÑŒ", btnVerify: "ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ", btnClose: "Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ",
                    wdTitle: "Ğ’Ñ‹Ğ²Ğ¾Ğ´ ÑÑ€ĞµĞ´ÑÑ‚Ğ²", wdCurBal: "Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ", wdPhName: "Ğ˜Ğ¼Ñ Ğ¸ Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ", wdPhCard: "ĞĞ¾Ğ¼ĞµÑ€ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ¸Ğ»Ğ¸ ÑÑ‡ĞµÑ‚Ğ°", wdWarn: "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ½Ğ¸Ğ¶Ğµ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ°.", btnSubmitWd: "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ", btnBack: "ĞĞ°Ğ·Ğ°Ğ´", garTitle: "Ğ“ĞĞ ĞĞ–",
                    btnSelected: "Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾", btnSelect: "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ", btnBuy: "ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ",
                    aiScenStart: "ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ñƒ. ĞŸĞ¾Ğ´Ğ±Ğ¾Ğ´Ñ€Ğ¸.", aiScenEmpty: "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿ÑƒÑÑ‚, Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ.", aiScenRed: "ĞŸÑ€Ğ¾ĞµÑ…Ğ°Ğ» Ğ½Ğ° ĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¹, ÑˆÑ‚Ñ€Ğ°Ñ„.", aiScenGreen: "Ğ—ĞµĞ»ĞµĞ½Ñ‹Ğ¹ ÑĞ²ĞµÑ‚, Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ğ°, Ğ½Ğ¸Ñ‚Ñ€Ğ¾!", aiScenCrash: "ĞĞ²Ğ°Ñ€Ğ¸Ñ, ÑˆÑ‚Ñ€Ğ°Ñ„.", aiScenNear: "ĞĞ¿Ğ°ÑĞ½Ñ‹Ğ¹ Ğ¾Ğ±Ğ³Ğ¾Ğ½, Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ğ°.", aiScenPoliceRun: "Ğ¡Ğ±ĞµĞ¶Ğ°Ğ» Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»Ğ¸Ñ†Ğ¸Ğ¸, ÑˆÑ‚Ñ€Ğ°Ñ„!", aiScenPoliceEarly: "Ğ£ĞµÑ…Ğ°Ğ» Ñ€Ğ°Ğ½Ğ¾ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»Ğ¸Ñ†Ğ¸Ğ¸, ÑˆÑ‚Ñ€Ğ°Ñ„.", aiScenPoliceOk: "ĞŸĞ¾Ğ»Ğ¸Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ¿ÑƒÑÑ‚Ğ¸Ğ»Ğ°, Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ğ°."
                }
            },
            tr: { 
                code: 'tr', flag: 'ğŸ‡¹ğŸ‡·', name: 'TÃ¼rkÃ§e', currency: 'TRY', rate: 19.5, tts: 'tr-TR', aiLang: 'Turkish', dir: 'ltr',
                t: {
                    regTitle: "KayÄ±t & Kurallar", regAttention: "DÄ°KKAT - Ã–nemli Kurallar:",
                    rule1: "Her kullanÄ±cÄ± yalnÄ±zca <b>1 kez</b> kayÄ±t olabilir.",
                    rule2: "AynÄ± cihazdan birden fazla hesap tespit edilirse <b>otomatik engellenir</b>.",
                    rule3: "KayÄ±ttan sonra 'Bakiye YÃ¼kle' bÃ¶lÃ¼mÃ¼nden 'Ã–demeyi DoÄŸrula' yaparak <b>0.50 AZN</b> bonusunuzu alabilirsiniz.",
                    rule4: "Kurallara uyarak kazanÃ§ elde edebilirsiniz.",
                    rule5: "Bakiye sÄ±fÄ±rlandÄ±ÄŸÄ±nda oyuna devam etmek iÃ§in yÃ¼kleme yapmalÄ±sÄ±nÄ±z.",
                    regWish: "Oyunda baÅŸarÄ±lar dileriz! ğŸ", phName: "Ad ve Soyad", phUsername: "KullanÄ±cÄ± AdÄ±", phAge: "YaÅŸ", phPass: "Åifre",
                    btnReg: "KaydÄ± Tamamla", lblLoginBal: "Mevcut Bakiye:", btnPlay: "Oyuna BaÅŸla", btnTopup: "Bakiye YÃ¼kle",
                    garBal: "Bakiye", lblDist: "Mesafe", aiTipLoad: "Yapay zeka tavsiyesi yÃ¼kleniyor...",
                    goTitle: "OYUN BÄ°TTÄ°", goMsgTitle: "Bakiyeniz sÄ±fÄ±rlandÄ±!", goMsgDesc: "Cezalar nedeniyle bakiyeniz bitti. Devam etmek iÃ§in bakiye yÃ¼klemelisiniz. Ä°kinci bir ÅŸans verilmez.",
                    btnRestart: "YENÄ°DEN BAÅLA", btnGoTopup: "BAKÄ°YE YÃœKLE", btnBrake: "FREN",
                    tuTitle: "Bakiye YÃ¼kle", tuRule1: "Bakiye yÃ¼klemek iÃ§in linkten minimum <b>$2 USD</b> Ã¶deme yapÄ±n.", tuRule2: "Ã–deme onaylandÄ±ktan sonra bakiyenize eklenecektir.", tuRule3: "SÄ±fÄ±r bakiye ile oynamak yasaktÄ±r.",
                    btnPay: "Ã–deme Yap", btnVerify: "Ã–demeyi DoÄŸrula", btnClose: "Kapat",
                    wdTitle: "Para Ã‡ek", wdCurBal: "Mevcut Bakiye", wdPhName: "Ad ve Soyad", wdPhCard: "Kart veya Hesap No", wdWarn: "Bakiye minimum limitin altÄ±nda.", btnSubmitWd: "Talep GÃ¶nder", btnBack: "Geri", garTitle: "GARAJ",
                    btnSelected: "SeÃ§ildi", btnSelect: "SeÃ§", btnBuy: "SatÄ±n Al",
                    aiScenStart: "Oyuna baÅŸlÄ±yor. Motive et.", aiScenEmpty: "Bakiye bitti, yÃ¼kleme yapmalÄ±.", aiScenRed: "KÄ±rmÄ±zÄ±da geÃ§ti, ceza.", aiScenGreen: "YeÅŸilde geÃ§ti, Ã¶dÃ¼l, nitro!", aiScenCrash: "Kaza yaptÄ±, ceza.", aiScenNear: "Tehlikeli geÃ§iÅŸ, Ã¶dÃ¼l.", aiScenPoliceRun: "Polisten kaÃ§tÄ±, ceza!", aiScenPoliceEarly: "Polis bekle derken gitti, ceza.", aiScenPoliceOk: "Polis onay verdi, Ã¶dÃ¼l."
                }
            },
            de: { code: 'de', flag: 'ğŸ‡©ğŸ‡ª', name: 'Deutsch', currency: 'EUR', rate: 0.55, tts: 'de-DE', aiLang: 'German', dir: 'ltr', t: { regTitle: "Registrierung & Regeln", regAttention: "ACHTUNG - Wichtige Regeln:", rule1: "Jeder darf sich nur <b>einmal</b> registrieren.", rule2: "Mehrere Konten vom selben GerÃ¤t werden <b>blockiert</b>.", rule3: "Gehen Sie auf 'Aufladen' und klicken Sie auf 'Zahlung prÃ¼fen', um Ihren Bonus von <b>0.50 AZN</b> zu erhalten.", rule4: "Beachten Sie die Regeln, um zu verdienen.", rule5: "Wenn das Guthaben null ist, mÃ¼ssen Sie aufladen.", regWish: "Viel Erfolg im Spiel! ğŸ", phName: "VollstÃ¤ndiger Name", phUsername: "Benutzername", phAge: "Alter", phPass: "Passwort", btnReg: "Registrierung abschlieÃŸen", lblLoginBal: "Aktuelles Guthaben:", btnPlay: "Spiel Starten", btnTopup: "Guthaben Aufladen", garBal: "Guthaben", lblDist: "Distanz", aiTipLoad: "KI-Tipp wird geladen...", goTitle: "SPIEL VORBEI", goMsgTitle: "Guthaben ist null!", goMsgDesc: "Ihr Guthaben ist aufgrund von Strafen aufgebraucht. Sie mÃ¼ssen aufladen, um fortzufahren.", btnRestart: "NEUSTART", btnGoTopup: "GUTHABEN AUFLADEN", btnBrake: "BREMSE", tuTitle: "Aufladen", tuRule1: "Zahlen Sie min. <b>$2 USD</b>, um aufzuladen.", tuRule2: "Nach ÃœberprÃ¼fung wird der Betrag hinzugefÃ¼gt.", tuRule3: "Spielen mit Null-Guthaben ist verboten.", btnPay: "Bezahlen", btnVerify: "Zahlung prÃ¼fen", btnClose: "SchlieÃŸen", wdTitle: "Auszahlen", wdCurBal: "Aktuelles Guthaben", wdPhName: "VollstÃ¤ndiger Name", wdPhCard: "Karten- oder Kontonummer", wdWarn: "Guthaben ist unter dem Limit.", btnSubmitWd: "Anfrage senden", btnBack: "ZurÃ¼ck", garTitle: "GARAGE", btnSelected: "AusgewÃ¤hlt", btnSelect: "WÃ¤hlen", btnBuy: "Kaufen", aiScenStart: "Startet das Spiel. Ermutigen.", aiScenEmpty: "Guthaben leer.", aiScenRed: "Rotlicht, Strafe.", aiScenGreen: "GrÃ¼nlicht, Belohnung!", aiScenCrash: "Unfall, Strafe.", aiScenNear: "Knapper Vorbeiflug, Belohnung.", aiScenPoliceRun: "Vor Polizei geflohen, Strafe!", aiScenPoliceEarly: "Zu frÃ¼h losgefahren, Strafe.", aiScenPoliceOk: "Polizei okay, Belohnung." } },
            fr: { code: 'fr', flag: 'ğŸ‡«ğŸ‡·', name: 'FranÃ§ais', currency: 'EUR', rate: 0.55, tts: 'fr-FR', aiLang: 'French', dir: 'ltr', t: { regTitle: "Inscription & RÃ¨gles", regAttention: "ATTENTION - RÃ¨gles:", rule1: "Une seule inscription <b>par personne</b>.", rule2: "Les comptes multiples du mÃªme appareil seront <b>bloquÃ©s</b>.", rule3: "Allez dans 'Recharger' et cliquez sur 'VÃ©rifier' pour obtenir votre bonus de <b>0.50 AZN</b>.", rule4: "Respectez les rÃ¨gles pour gagner.", rule5: "Rechargez si le solde est nul.", regWish: "Bonne chance ! ğŸ", phName: "Nom Complet", phUsername: "Nom d'utilisateur", phAge: "Ã‚ge", phPass: "Mot de passe", btnReg: "S'inscrire", lblLoginBal: "Solde actuel :", btnPlay: "Commencer", btnTopup: "Recharger", garBal: "Solde", lblDist: "Distance", aiTipLoad: "Chargement de l'IA...", goTitle: "FIN DE PARTIE", goMsgTitle: "Solde Ã  zÃ©ro !", goMsgDesc: "Vous devez recharger pour continuer. Aucune seconde chance.", btnRestart: "RECOMMENCER", btnGoTopup: "RECHARGER", btnBrake: "FREIN", tuTitle: "Recharger", tuRule1: "Payez min. <b>$2 USD</b> pour recharger.", tuRule2: "Le montant sera ajoutÃ© aprÃ¨s vÃ©rification.", tuRule3: "Jouer avec un solde nul est interdit.", btnPay: "Payer", btnVerify: "VÃ©rifier", btnClose: "Fermer", wdTitle: "Retirer", wdCurBal: "Solde", wdPhName: "Nom", wdPhCard: "Carte/Compte", wdWarn: "Solde insuffisant.", btnSubmitWd: "Envoyer", btnBack: "Retour", garTitle: "GARAGE", btnSelected: "SÃ©lectionnÃ©", btnSelect: "Choisir", btnBuy: "Acheter", aiScenStart: "Commence le jeu.", aiScenEmpty: "Solde vide.", aiScenRed: "Feu rouge, amende.", aiScenGreen: "Feu vert, rÃ©compense!", aiScenCrash: "Accident, amende.", aiScenNear: "Presque, rÃ©compense.", aiScenPoliceRun: "Fuite, amende!", aiScenPoliceEarly: "DÃ©part anticipÃ©, amende.", aiScenPoliceOk: "Police OK, rÃ©compense." } },
            es: { code: 'es', flag: 'ğŸ‡ªğŸ‡¸', name: 'EspaÃ±ol', currency: 'EUR', rate: 0.55, tts: 'es-ES', aiLang: 'Spanish', dir: 'ltr', t: { regTitle: "Registro y Reglas", regAttention: "ATENCIÃ“N - Reglas:", rule1: "Solo <b>1 registro</b> por usuario.", rule2: "MÃºltiples cuentas del mismo dispositivo serÃ¡n <b>bloqueadas</b>.", rule3: "Ve a 'Recargar' y haz clic en 'Verificar' para reclamar tu bono de <b>0.50 AZN</b>.", rule4: "Sigue las reglas para ganar.", rule5: "Recarga si el saldo llega a cero.", regWish: "Â¡Buena suerte! ğŸ", phName: "Nombre completo", phUsername: "Usuario", phAge: "Edad", phPass: "ContraseÃ±a", btnReg: "Completar Registro", lblLoginBal: "Saldo actual:", btnPlay: "Jugar", btnTopup: "Recargar", garBal: "Saldo", lblDist: "Distancia", aiTipLoad: "Cargando IA...", goTitle: "FIN DEL JUEGO", goMsgTitle: "Â¡Saldo cero!", goMsgDesc: "Recarga para continuar. Sin segundas oportunidades.", btnRestart: "REINICIAR", btnGoTopup: "RECARGAR", btnBrake: "FRENO", tuTitle: "Recargar Saldo", tuRule1: "Paga min. <b>$2 USD</b> para recargar.", tuRule2: "Se aÃ±adirÃ¡ tras verificaciÃ³n.", tuRule3: "Prohibido jugar con saldo cero.", btnPay: "Pagar", btnVerify: "Verificar", btnClose: "Cerrar", wdTitle: "Retirar", wdCurBal: "Saldo", wdPhName: "Nombre", wdPhCard: "Tarjeta/Cuenta", wdWarn: "Saldo insuficiente.", btnSubmitWd: "Enviar", btnBack: "AtrÃ¡s", garTitle: "GARAJE", btnSelected: "Seleccionado", btnSelect: "Elegir", btnBuy: "Comprar", aiScenStart: "Inicia el juego.", aiScenEmpty: "Saldo vacÃ­o.", aiScenRed: "Luz roja, multa.", aiScenGreen: "Luz verde, premio!", aiScenCrash: "Choque, multa.", aiScenNear: "Casi, premio.", aiScenPoliceRun: "Fuga, multa!", aiScenPoliceEarly: "Salida temprana, multa.", aiScenPoliceOk: "PolicÃ­a OK, premio." } },
            ar: { code: 'ar', flag: 'ğŸ‡¸ğŸ‡¦', name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', currency: 'SAR', rate: 2.2, tts: 'ar-SA', aiLang: 'Arabic', dir: 'rtl', t: { regTitle: "Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ù‚ÙˆØ§Ø¹Ø¯", regAttention: "ØªÙ†Ø¨ÙŠÙ‡ - Ù‚ÙˆØ§Ø¹Ø¯ Ù‡Ø§Ù…Ø©:", rule1: "ÙŠÙØ³Ù…Ø­ Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ <b>Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</b> ÙÙ‚Ø·.", rule2: "Ø³ÙŠØªÙ… <b>Ø­Ø¸Ø±</b> Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø².", rule3: "Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ 'Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯' ÙˆØ§Ù†Ù‚Ø± Ø¹Ù„Ù‰ 'Ø§Ù„ØªØ­Ù‚Ù‚' Ù„Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ø¨Ù…ÙƒØ§ÙØ£Ø© <b>0.50 AZN</b>.", rule4: "Ø§ØªØ¨Ø¹ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ù„ÙƒØ³Ø¨ Ø§Ù„Ù…Ø§Ù„.", rule5: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±ØµÙŠØ¯ ØµÙØ±Ø§Ù‹ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø´Ø­Ù† Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±.", regWish: "Ø­Ø¸Ø§ Ø³Ø¹ÙŠØ¯Ø§! ğŸ", phName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„", phUsername: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…", phAge: "Ø§Ù„Ø¹Ù…Ø±", phPass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±", btnReg: "Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„", lblLoginBal: "Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ:", btnPlay: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©", btnTopup: "Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯", garBal: "Ø§Ù„Ø±ØµÙŠØ¯", lblDist: "Ø§Ù„Ù…Ø³Ø§ÙØ©", aiTipLoad: "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...", goTitle: "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©", goMsgTitle: "Ø§Ù„Ø±ØµÙŠØ¯ ØµÙØ±!", goMsgDesc: "Ø§Ù†ØªÙ‡Ù‰ Ø±ØµÙŠØ¯Ùƒ. Ø§Ø´Ø­Ù† Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±. Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØ±ØµØ© Ø«Ø§Ù†ÙŠØ©.", btnRestart: "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ø¯Ø¡", btnGoTopup: "Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯", btnBrake: "ÙØ±Ø§Ù…Ù„", tuTitle: "Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯", tuRule1: "Ø§Ø¯ÙØ¹ <b>$2 USD</b> ÙƒØ­Ø¯ Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø´Ø­Ù†.", tuRule2: "Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚.", tuRule3: "ÙŠÙ…Ù†Ø¹ Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ø±ØµÙŠØ¯ ØµÙØ±.", btnPay: "Ø§Ø¯ÙØ¹ Ø§Ù„Ø¢Ù†", btnVerify: "Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯ÙØ¹", btnClose: "Ø¥ØºÙ„Ø§Ù‚", wdTitle: "Ø³Ø­Ø¨ Ø§Ù„Ø£Ù…ÙˆØ§Ù„", wdCurBal: "Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ", wdPhName: "Ø§Ù„Ø§Ø³Ù…", wdPhCard: "Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©", wdWarn: "Ø§Ù„Ø±ØµÙŠØ¯ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰.", btnSubmitWd: "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨", btnBack: "Ø±Ø¬ÙˆØ¹", garTitle: "Ø§Ù„Ù…Ø±Ø¢Ø¨", btnSelected: "Ù…Ø­Ø¯Ø¯", btnSelect: "Ø§Ø®ØªØ±", btnBuy: "Ø´Ø±Ø§Ø¡", aiScenStart: "ÙŠØ¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©.", aiScenEmpty: "Ø§Ù„Ø±ØµÙŠØ¯ ÙØ§Ø±Øº.", aiScenRed: "Ø¶ÙˆØ¡ Ø£Ø­Ù…Ø±ØŒ ØºØ±Ø§Ù…Ø©.", aiScenGreen: "Ø¶ÙˆØ¡ Ø£Ø®Ø¶Ø±ØŒ Ù…ÙƒØ§ÙØ£Ø©!", aiScenCrash: "Ø­Ø§Ø¯Ø«ØŒ ØºØ±Ø§Ù…Ø©.", aiScenNear: "Ù…Ø±ÙˆØ± Ù‚Ø±ÙŠØ¨ØŒ Ù…ÙƒØ§ÙØ£Ø©.", aiScenPoliceRun: "Ù‡Ø±ÙˆØ¨ØŒ ØºØ±Ø§Ù…Ø©!", aiScenPoliceEarly: "Ø§Ù†Ø·Ù„Ø§Ù‚ Ù…Ø¨ÙƒØ±ØŒ ØºØ±Ø§Ù…Ø©.", aiScenPoliceOk: "Ø´Ø±Ø·Ø© Ù…ÙˆØ§ÙÙ‚ØŒ Ù…ÙƒØ§ÙØ£Ø©." } }
        };

        const CAR_SKINS = [
            { id: 'default', name: 'Neon Blue', color: '#0ea5e9', priceAZN: 0, owned: true },
            { id: 'sport', name: 'Sport Red', color: '#f43f5e', priceAZN: 5.00, owned: false },
            { id: 'taxi', name: 'City Taxi', color: '#facc15', priceAZN: 10.00, owned: false },
            { id: 'vip', name: 'VIP Stealth', color: '#0f172a', priceAZN: 25.00, owned: false }
        ];
        const TRAFFIC_COLORS = ['#f43f5e', '#3b82f6', '#10b981', '#f59e0b', '#a855f7', '#cbd5e1', '#ea580c'];

        let currentLang = localStorage.getItem('premiumDriveLang') || 'az';
        let activeSkinId = 'default';
        let balanceAZN = 0.00; 

        // ==========================================
        // ğŸ› ï¸ DÄ°L FUNKSÄ°YALARI
        // ==========================================
        function initLanguage() {
            const langBtn = document.getElementById('langBtn');
            const langDropdown = document.getElementById('langDropdown');
            
            langDropdown.innerHTML = '';
            Object.values(LANGUAGES).forEach(l => {
                const opt = document.createElement('div');
                opt.className = "flex items-center gap-2 px-3 py-2 hover:bg-white/10 rounded-lg cursor-pointer transition-colors";
                opt.innerHTML = `<span>${l.flag}</span> <span class="text-xs font-bold">${l.name}</span>`;
                opt.onclick = () => { changeLanguage(l.code); langDropdown.classList.add('hidden'); };
                langDropdown.appendChild(opt);
            });

            langBtn.onclick = () => langDropdown.classList.toggle('hidden');
            changeLanguage(currentLang);
        }

        function changeLanguage(code) {
            currentLang = code;
            localStorage.setItem('premiumDriveLang', code);
            const lang = LANGUAGES[code];
            
            document.getElementById('currentFlag').innerText = lang.flag;
            document.getElementById('currentLangName').innerText = lang.code;
            document.body.setAttribute('dir', lang.dir);
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (lang.t[key]) {
                    if (el.tagName === 'INPUT') el.placeholder = lang.t[key];
                    else el.innerHTML = lang.t[key];
                }
            });
            
            updateUI();
            if(!document.getElementById('garageModal').classList.contains('hidden')) renderGarage();
        }

        function formatMoney(amountAZN) {
            const lang = LANGUAGES[currentLang];
            const converted = (amountAZN * lang.rate).toFixed(2);
            if(lang.dir === 'rtl') return `${lang.currency} ${converted}`;
            return `${converted} ${lang.currency}`;
        }

        // ==========================================
        // QEYDÄ°YYAT VÆ YADDAÅ (SÄ±fÄ±r Balans MÉ™ntiqi)
        // ==========================================
        let isRegistered = localStorage.getItem('premiumDriveRegistered') === 'true';
        let savedBalance = localStorage.getItem('premiumDriveBalance');

        if (isRegistered) {
            document.getElementById('registrationScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            balanceAZN = savedBalance !== null ? parseFloat(savedBalance) : 0.00;
        }

        document.getElementById('regForm').addEventListener('submit', (e) => {
            e.preventDefault();
            localStorage.setItem('premiumDriveRegistered', 'true');
            if (savedBalance === null) {
                balanceAZN = 0.00; // Qeydiyyat anÄ±nda 0
                localStorage.setItem('premiumDriveBalance', '0.00');
            }
            document.getElementById('registrationScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            updateUI();
        });

        // ==========================================
        // AUDIO & AI
        // ==========================================
        let audioCtx = null; let engineOsc = null; let engineGain = null;
        function initAudio() {
            if (audioCtx) return;
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            engineOsc = audioCtx.createOscillator(); engineGain = audioCtx.createGain();
            engineOsc.type = 'sawtooth'; engineOsc.frequency.setValueAtTime(40, audioCtx.currentTime);
            engineGain.gain.setValueAtTime(0.08, audioCtx.currentTime); 
            engineOsc.connect(engineGain); engineGain.connect(audioCtx.destination); engineOsc.start();
        }
        function playTone(freq, type, duration, vol = 0.1) {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
            osc.type = type; osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(vol, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
            osc.connect(gain); gain.connect(audioCtx.destination); osc.start(); osc.stop(audioCtx.currentTime + duration);
        }
        function playCrashSound() { playTone(150, 'sawtooth', 0.5, 0.4); setTimeout(() => playTone(50, 'square', 0.8, 0.4), 100); }
        function playSuccessSound() { playTone(660, 'sine', 0.1, 0.2); setTimeout(() => playTone(880, 'sine', 0.3, 0.2), 100); }
        function playFineSound() { playTone(200, 'square', 0.3, 0.3); setTimeout(() => playTone(150, 'square', 0.4, 0.3), 150); }
        function playBuySound() { playTone(523.25, 'sine', 0.1, 0.2); setTimeout(() => playTone(659.25, 'sine', 0.2, 0.2), 100); setTimeout(() => playTone(783.99, 'sine', 0.3, 0.2), 200); }
        function playNitroSound() { playTone(300, 'square', 0.1, 0.1); setTimeout(() => playTone(500, 'sawtooth', 0.5, 0.2), 100); }
        function playPoliceSiren() { playTone(800, 'sine', 0.3, 0.2); setTimeout(() => playTone(600, 'sine', 0.3, 0.2), 300); }

        function getSpeechData(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel(); 
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = LANGUAGES[currentLang].tts; utterance.rate = 1.1; 
                utterance.onstart = () => { document.getElementById("aiIcon").innerText = "ğŸ”Š"; };
                utterance.onend = () => { document.getElementById("aiIcon").innerText = "ğŸ¤–"; };
                window.speechSynthesis.speak(utterance);
            }
        }

        const API_KEY = "SÄ°ZÄ°N_API_AÃ‡ARINIZI_BURAYA_YAPIÅDIRIN"; 
        const genAI = new GoogleGenerativeAI(API_KEY);
        async function getDrivingAdvice(scenarioKey) {
            const lang = LANGUAGES[currentLang];
            const aiTipEl = document.getElementById("aiTipText");
            try {
                const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
                const prompt = `You are an in-game voice assistant. Scenario: ${lang.t[scenarioKey] || scenarioKey}. Reply very excitedly and in max 4 words. Language: ${lang.aiLang}.`;
                const result = await model.generateContent(prompt);
                const text = await result.response.text();
                aiTipEl.innerText = text; getSpeechData(text);
            } catch (error) { console.error(error); }
        }

        function triggerScreenShake() {
            const container = document.getElementById('gameContainer');
            container.classList.remove('shake-effect');
            void container.offsetWidth; 
            container.classList.add('shake-effect');
        }

        // ==========================================
        // OYUN MÆNTÄ°QÄ°
        // ==========================================
        const LOGICAL_WIDTH = 400; const LOGICAL_HEIGHT = 600;
        const CAR_WIDTH = 48; const CAR_HEIGHT = 86; const PLAYER_Y = LOGICAL_HEIGHT - 130;
        const LANES = [100, 200, 300]; const BIOMES = [{ ground: '#020617', road: '#0f172a', curb: '#1e293b' }];

        let isGameRunning = false; let isBraking = false; let isGameOver = false;
        
        let score = 0; let trafficCars = []; let speedMultiplier = 1; let animatedPopups = []; 
        let nitroTimer = 0; let screenShake = 0;
        let gameState = { carX: LANES[1] - CAR_WIDTH / 2, targetX: LANES[1] - CAR_WIDTH / 2, linesOffset: 0 };
        
        let trafficLight = { active: false, y: -200, state: 'GREEN', timer: 0, passed: false };
        let policeEvent = { active: false, y: -200, state: 'APPROACHING', waitTimer: 180 };

        const canvas = document.getElementById('gameCanvas'); const ctx = canvas.getContext('2d');

        function updateUI() {
            localStorage.setItem('premiumDriveBalance', balanceAZN.toFixed(2));
            const formatted = formatMoney(balanceAZN);
            
            document.getElementById('balanceText').innerText = formatted;
            document.getElementById('loginBalanceText').innerText = formatted;
            document.getElementById('garageBalanceText').innerText = formatted;
            document.getElementById('withdrawBalanceDisplay').innerText = formatted;
            document.getElementById('scoreText').innerText = `${Math.floor(score)} M`;
            document.getElementById('hiddenBalanceInput').value = formatted;
            
            const submitBtn = document.getElementById('submitWithdrawBtn');
            const warning = document.getElementById('withdrawWarning');
            if (balanceAZN < 30) {
                submitBtn.disabled = true; submitBtn.classList.add('opacity-50', 'cursor-not-allowed'); warning.classList.remove('hidden');
            } else {
                submitBtn.disabled = false; submitBtn.classList.remove('opacity-50', 'cursor-not-allowed'); warning.classList.add('hidden');
            }
        }

        function spawnPopup(text, color, x, y) { animatedPopups.push({ text, color, x, y, alpha: 1, life: 60 }); }

        window.selectCar = (id) => { activeSkinId = id; playSuccessSound(); renderGarage(); };
        window.buyCar = (id) => {
            const car = CAR_SKINS.find(c => c.id === id);
            if (car && balanceAZN >= car.priceAZN) {
                balanceAZN -= car.priceAZN; car.owned = true; activeSkinId = id;
                playBuySound(); updateUI(); renderGarage(); getDrivingAdvice("aiScenGreen"); 
            }
        };

        function renderGarage() {
            const list = document.getElementById('garageList'); list.innerHTML = '';
            const lang = LANGUAGES[currentLang];
            CAR_SKINS.forEach(car => {
                const item = document.createElement('div'); item.className = "glass-panel p-4 rounded-[20px] flex items-center justify-between";
                const isSelected = activeSkinId === car.id; let btnHTML = '';
                if (car.owned) {
                    btnHTML = isSelected ? `<button disabled class="py-2 px-4 rounded-xl text-xs font-bold bg-cyan-500/10 text-cyan-500">${lang.t.btnSelected}</button>` 
                    : `<button onclick="window.selectCar('${car.id}')" class="py-2 px-4 rounded-xl text-xs font-bold bg-cyan-500/20 text-cyan-300">${lang.t.btnSelect}</button>`;
                } else {
                    const priceF = formatMoney(car.priceAZN);
                    btnHTML = balanceAZN >= car.priceAZN ? `<button onclick="window.buyCar('${car.id}')" class="py-2 px-4 rounded-xl text-xs font-bold bg-emerald-500/20 text-emerald-400">${lang.t.btnBuy} (${priceF})</button>`
                    : `<button disabled class="py-2 px-4 rounded-xl text-xs font-bold bg-slate-800/50 text-slate-500">${lang.t.btnBuy} (${priceF})</button>`;
                }
                item.innerHTML = `<div class="flex items-center gap-4"><div class="w-12 h-12 rounded-xl flex items-center justify-center" style="background-color: ${car.color}"><div class="w-6 h-10 bg-black/20"></div></div><div><p class="font-bold text-sm text-left">${car.name}</p></div></div><div>${btnHTML}</div>`;
                list.appendChild(item);
            });
        }

        function startGame() {
            if (balanceAZN <= 0) {
                document.getElementById('topUpModal').classList.remove('hidden');
                getDrivingAdvice("aiScenEmpty");
                return;
            }

            document.getElementById('loginScreen').classList.add('hidden'); document.getElementById('gameScreen').classList.remove('hidden'); document.getElementById('gameOverScreen').classList.add('hidden');
            initAudio(); isGameRunning = true; isGameOver = false; score = 0; speedMultiplier = 1; trafficCars = []; animatedPopups = [];
            nitroTimer = 0; screenShake = 0;
            gameState.carX = LANES[1] - CAR_WIDTH / 2; gameState.targetX = LANES[1] - CAR_WIDTH / 2; 
            trafficLight.active = false; policeEvent.active = false;
            updateUI(); getDrivingAdvice("aiScenStart"); requestAnimationFrame(gameLoop);
        }

        function gameOver() {
            isGameOver = true; 
            isGameRunning = false; 
            document.getElementById('gameOverScreen').classList.remove('hidden'); 
            document.getElementById('finalScore').innerText = Math.floor(score);
            
            const restartBtn = document.getElementById('restartBtn');
            const topupBtn = document.getElementById('gameOverTopupBtn');
            const msg = document.getElementById('gameOverMessage');
            
            if (balanceAZN <= 0) {
                restartBtn.classList.add('hidden');
                topupBtn.classList.remove('hidden');
                msg.classList.remove('hidden');
                getDrivingAdvice("aiScenEmpty"); 
            } else {
                restartBtn.classList.remove('hidden');
                topupBtn.classList.add('hidden');
                msg.classList.add('hidden');
            }
            if (engineGain) engineGain.gain.setTargetAtTime(0, audioCtx.currentTime, 0.1);
        }

        function checkBankruptcy() {
            if (balanceAZN <= 0) {
                balanceAZN = 0; 
                updateUI(); 
                gameOver(); 
                return true; 
            }
            return false;
        }

        function update() {
            if (!isGameRunning || isGameOver) return;
            
            let currentBaseSpeed = 5;
            if (nitroTimer > 0) { currentBaseSpeed += 6; nitroTimer--; }

            const baseSpeed = isBraking ? 0 : currentBaseSpeed * speedMultiplier; 
            if (!isBraking) { score += (nitroTimer > 0 ? 0.3 : 0.1) * speedMultiplier; } 
            gameState.linesOffset = (gameState.linesOffset + baseSpeed) % 80; gameState.carX += (gameState.targetX - gameState.carX) * 0.15;

            if (screenShake > 0) screenShake--;

            // Ä°ÅIQFOR
            if (!trafficLight.active && !policeEvent.active && Math.random() < 0.005 && score > 10) { trafficLight.active = true; trafficLight.y = -100; trafficLight.passed = false; trafficLight.timer = 300; trafficLight.state = 'GREEN'; }
            if (trafficLight.active) {
                trafficLight.y += baseSpeed; trafficLight.timer--;
                if (trafficLight.timer === 200) trafficLight.state = 'YELLOW';
                if (trafficLight.timer === 140) trafficLight.state = 'RED';
                if (trafficLight.timer === 0) trafficLight.state = 'GREEN';

                if (trafficLight.y > PLAYER_Y + CAR_HEIGHT && !trafficLight.passed) {
                    trafficLight.passed = true;
                    if (trafficLight.state === 'RED' && !isBraking) { 
                        balanceAZN -= 0.60; 
                        playFineSound(); triggerScreenShake(); screenShake = 15;
                        spawnPopup("- " + formatMoney(0.60), "#f43f5e", gameState.carX + CAR_WIDTH/2, PLAYER_Y - 20); 
                        if (checkBankruptcy()) return;
                        getDrivingAdvice("aiScenRed"); 
                    } else if (trafficLight.state === 'GREEN') { 
                        balanceAZN += 0.40; nitroTimer = 60; 
                        playSuccessSound(); playNitroSound();
                        spawnPopup("ğŸš€ + " + formatMoney(0.40), "#10b981", gameState.carX + CAR_WIDTH/2, PLAYER_Y - 20); 
                    }
                    updateUI(); 
                }
                if (trafficLight.y > LOGICAL_HEIGHT) trafficLight.active = false;
            }

            // POLÄ°S
            if (!policeEvent.active && !trafficLight.active && Math.random() < 0.003 && score > 30) {
                policeEvent = { active: true, y: -200, state: 'APPROACHING', waitTimer: 180 };
                playPoliceSiren();
            }
            if (policeEvent.active) {
                if (policeEvent.state === 'APPROACHING') {
                    policeEvent.y += baseSpeed;
                    if (policeEvent.y > PLAYER_Y - 20) {
                        if (!isBraking) {
                            balanceAZN -= 0.60;
                            playFineSound(); triggerScreenShake(); screenShake = 20;
                            spawnPopup("ğŸš“ - " + formatMoney(0.60), "#f43f5e", LOGICAL_WIDTH/2, PLAYER_Y - 30);
                            if (checkBankruptcy()) return;
                            getDrivingAdvice("aiScenPoliceRun");
                            policeEvent.state = 'PASSED';
                        } else {
                            policeEvent.state = 'WAITING';
                            policeEvent.y = PLAYER_Y - 20;
                        }
                        updateUI();
                    }
                } else if (policeEvent.state === 'WAITING') {
                    policeEvent.y = PLAYER_Y - 20; 
                    if (!isBraking) {
                        balanceAZN -= 0.60;
                        playFineSound(); triggerScreenShake(); screenShake = 20;
                        spawnPopup("âŒ - " + formatMoney(0.60), "#f43f5e", LOGICAL_WIDTH/2, PLAYER_Y - 30);
                        if (checkBankruptcy()) return;
                        getDrivingAdvice("aiScenPoliceEarly");
                        policeEvent.state = 'PASSED';
                        updateUI();
                    } else {
                        policeEvent.waitTimer--;
                        if (policeEvent.waitTimer <= 0) {
                            policeEvent.state = 'GO';
                            balanceAZN += 0.30;
                            playSuccessSound();
                            spawnPopup("âœ… + " + formatMoney(0.30), "#10b981", LOGICAL_WIDTH/2, PLAYER_Y - 30);
                            getDrivingAdvice("aiScenPoliceOk");
                            updateUI();
                        }
                    }
                } else if (policeEvent.state === 'GO' || policeEvent.state === 'PASSED') {
                    policeEvent.y += baseSpeed;
                    if (policeEvent.y > LOGICAL_HEIGHT) policeEvent.active = false;
                }
            }

            // TRAFÄ°K
            if (Math.random() < 0.008 * speedMultiplier && !isBraking && !trafficLight.active && !policeEvent.active) {
                const lane = LANES[Math.floor(Math.random() * LANES.length)];
                if (trafficCars.every(c => Math.abs(c.x - (lane - CAR_WIDTH/2)) > 10 || c.y > 150)) {
                    let cColor = TRAFFIC_COLORS[Math.floor(Math.random() * TRAFFIC_COLORS.length)];
                    let isTruck = Math.random() > 0.8; 
                    trafficCars.push({ 
                        x: lane - CAR_WIDTH / 2, y: -150, speed: Math.random() * 0.5 + 1.0, 
                        color: cColor, type: isTruck ? 'truck' : 'car', height: isTruck ? 130 : CAR_HEIGHT,
                        nearMissed: false, crashed: false 
                    });
                }
            }

            for (let i = trafficCars.length - 1; i >= 0; i--) {
                let car = trafficCars[i]; car.y += baseSpeed + (isBraking ? car.speed * 2 : car.speed - 2); 
                
                if (!car.crashed && gameState.carX < car.x + CAR_WIDTH - 12 && gameState.carX + CAR_WIDTH - 12 > car.x && PLAYER_Y < car.y + car.height - 12 && PLAYER_Y + CAR_HEIGHT - 12 > car.y) {
                    balanceAZN -= 0.10; 
                    playCrashSound(); triggerScreenShake(); screenShake = 20;
                    spawnPopup("- " + formatMoney(0.10), "#f43f5e", gameState.carX + CAR_WIDTH/2, PLAYER_Y); 
                    car.crashed = true; trafficCars.splice(i, 1); 
                    if (checkBankruptcy()) return;
                    getDrivingAdvice("aiScenCrash"); updateUI(); 
                } 
                else if (!car.crashed && !car.nearMissed && car.y > PLAYER_Y - car.height && car.y < PLAYER_Y + CAR_HEIGHT) {
                    if (Math.abs((gameState.carX + CAR_WIDTH/2) - (car.x + CAR_WIDTH/2)) < CAR_WIDTH + 20) {
                        car.nearMissed = true; balanceAZN += 0.05;
                        playTone(800, 'sine', 0.1, 0.1); 
                        spawnPopup("âš¡ + " + formatMoney(0.05), "#facc15", gameState.carX + CAR_WIDTH/2, PLAYER_Y - 20);
                        updateUI();
                    }
                }
                else if (car.y > LOGICAL_HEIGHT) { trafficCars.splice(i, 1); }
            }

            animatedPopups.forEach(p => { p.y -= (nitroTimer > 0 ? 3 : 1.5); p.alpha -= 0.015; p.life--; }); animatedPopups = animatedPopups.filter(p => p.life > 0);
            if (engineGain && audioCtx) { 
                let freq = isBraking ? 30 : 40 * speedMultiplier;
                if (nitroTimer > 0) freq = 80; 
                engineOsc.frequency.setTargetAtTime(freq, audioCtx.currentTime, 0.1); 
                engineGain.gain.setTargetAtTime(isBraking ? 0.02 : Math.min(0.15, 0.08 * speedMultiplier), audioCtx.currentTime, 0.1); 
            }
        }

        function drawCar(x, y, color, isPlayer, braking, type = 'car', height = CAR_HEIGHT) {
            ctx.save(); ctx.shadowColor = 'rgba(0,0,0,0.5)'; ctx.shadowBlur = 15; ctx.shadowOffsetY = 10; ctx.fillStyle = color; 
            
            ctx.beginPath(); ctx.roundRect(x, y, CAR_WIDTH, height, 12); ctx.fill(); ctx.shadowColor = 'transparent'; 
            
            if (type === 'car' || type === 'police') {
                ctx.fillStyle = '#020617'; ctx.beginPath(); ctx.roundRect(x + 4, y + 15, CAR_WIDTH - 8, 18, 4); ctx.fill(); 
                ctx.beginPath(); ctx.roundRect(x + 6, y + height - 25, CAR_WIDTH - 12, 12, 3); ctx.fill();
            } else if (type === 'truck') {
                ctx.fillStyle = '#0f172a'; 
                ctx.beginPath(); ctx.roundRect(x + 2, y + 25, CAR_WIDTH - 4, height - 30, 4); ctx.fill();
                ctx.fillStyle = '#020617'; 
                ctx.beginPath(); ctx.roundRect(x + 4, y + 5, CAR_WIDTH - 8, 15, 4); ctx.fill();
            }

            if (isPlayer && braking) { ctx.fillStyle = '#f43f5e'; ctx.fillRect(x + 4, y + height - 6, 12, 4); ctx.fillRect(x + CAR_WIDTH - 16, y + height - 6, 12, 4); } 
            else if (!isPlayer) { ctx.fillStyle = '#fef08a'; ctx.beginPath(); ctx.arc(x + 10, y + 4, 3, 0, Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.arc(x + CAR_WIDTH - 10, y + 4, 3, 0, Math.PI*2); ctx.fill(); }
            
            if (isPlayer && nitroTimer > 0) {
                ctx.fillStyle = 'rgba(34, 211, 238, 0.5)';
                ctx.beginPath(); ctx.roundRect(x + 10, y + height, CAR_WIDTH - 20, Math.random() * 40 + 20, 5); ctx.fill();
            }
            ctx.restore();
        }

        function draw() {
            if (!ctx) return; 
            ctx.save();
            if (screenShake > 0) { ctx.translate(Math.random() * 10 - 5, Math.random() * 10 - 5); }

            const biome = BIOMES[0];
            ctx.fillStyle = biome.ground; ctx.fillRect(0, 0, LOGICAL_WIDTH, LOGICAL_HEIGHT); 
            ctx.fillStyle = biome.curb; ctx.fillRect(50, 0, 10, LOGICAL_HEIGHT); ctx.fillRect(LOGICAL_WIDTH - 60, 0, 10, LOGICAL_HEIGHT); 
            ctx.fillStyle = biome.road; ctx.fillRect(60, 0, LOGICAL_WIDTH - 120, LOGICAL_HEIGHT);
            
            let dashLength = nitroTimer > 0 ? 60 : 30;
            ctx.setLineDash([dashLength, 40]); ctx.strokeStyle = nitroTimer > 0 ? 'rgba(34, 211, 238, 0.4)' : 'rgba(255,255,255,0.15)'; ctx.lineWidth = 4; ctx.lineDashOffset = -gameState.linesOffset; ctx.beginPath(); ctx.moveTo(150, 0); ctx.lineTo(150, LOGICAL_HEIGHT); ctx.moveTo(250, 0); ctx.lineTo(250, LOGICAL_HEIGHT); ctx.stroke();

            if (trafficLight.active) {
                ctx.fillStyle = 'rgba(255,255,255,0.8)'; ctx.fillRect(60, trafficLight.y, LOGICAL_WIDTH - 120, 8); ctx.fillStyle = '#0f172a'; ctx.beginPath(); ctx.roundRect(LOGICAL_WIDTH - 45, trafficLight.y - 70, 26, 75, 8); ctx.fill();
                const drawLight = (yOff, color, active) => { ctx.save(); ctx.fillStyle = active ? color : '#1e293b'; ctx.beginPath(); ctx.arc(LOGICAL_WIDTH - 32, trafficLight.y - 70 + yOff, 8, 0, Math.PI*2); ctx.fill(); ctx.restore(); };
                drawLight(16, '#f43f5e', trafficLight.state === 'RED'); drawLight(38, '#facc15', trafficLight.state === 'YELLOW'); drawLight(60, '#10b981', trafficLight.state === 'GREEN');
            }

            if (policeEvent.active) {
                let px = LOGICAL_WIDTH - 55;
                drawCar(px, policeEvent.y, '#ffffff', false, false, 'police', CAR_HEIGHT);
                
                let isRed = Date.now() % 400 < 200;
                ctx.fillStyle = isRed ? '#f43f5e' : '#3b82f6';
                ctx.fillRect(px + 10, policeEvent.y + 20, CAR_WIDTH - 20, 6);
                
                ctx.font = '900 20px sans-serif';
                ctx.textAlign = 'right';
                
                let stopTxt = "ğŸ›‘ SAXLA!"; let goTxt = "âœ… GET!";
                if(currentLang==='en') { stopTxt="ğŸ›‘ STOP!"; goTxt="âœ… GO!"; }
                if(currentLang==='ru') { stopTxt="ğŸ›‘ Ğ¡Ğ¢ĞĞŸ!"; goTxt="âœ… Ğ•Ğ”Ğ¬!"; }
                if(currentLang==='tr') { stopTxt="ğŸ›‘ DUR!"; goTxt="âœ… GÄ°T!"; }
                if(currentLang==='de') { stopTxt="ğŸ›‘ HALT!"; goTxt="âœ… LOS!"; }
                if(currentLang==='fr') { stopTxt="ğŸ›‘ STOP!"; goTxt="âœ… ALLEZ!"; }
                if(currentLang==='es') { stopTxt="ğŸ›‘ ALTO!"; goTxt="âœ… VE!"; }
                if(currentLang==='ar') { stopTxt="ğŸ›‘ Ù‚Ù!"; goTxt="âœ… Ø§Ø°Ù‡Ø¨!"; }

                if (policeEvent.state === 'APPROACHING' || policeEvent.state === 'WAITING') {
                    ctx.fillStyle = '#f43f5e';
                    ctx.fillText(stopTxt, px - 10, policeEvent.y + CAR_HEIGHT / 2);
                } else if (policeEvent.state === 'GO') {
                    ctx.fillStyle = '#10b981';
                    ctx.fillText(goTxt, px - 10, policeEvent.y + CAR_HEIGHT / 2);
                }
            }

            trafficCars.forEach(car => drawCar(car.x, car.y, car.color, false, false, car.type, car.height));
            drawCar(gameState.carX, PLAYER_Y, CAR_SKINS.find(c => c.id === activeSkinId).color, true, isBraking, 'car', CAR_HEIGHT); 

            animatedPopups.forEach(p => { ctx.save(); ctx.fillStyle = p.color; ctx.globalAlpha = Math.max(0, p.alpha); ctx.font = '900 24px sans-serif'; ctx.textAlign = 'center'; ctx.fillText(p.text, p.x, p.y); ctx.restore(); });
            
            if (nitroTimer > 0) { ctx.fillStyle = 'rgba(34, 211, 238, ' + (nitroTimer/60 * 0.1) + ')'; ctx.fillRect(0, 0, LOGICAL_WIDTH, LOGICAL_HEIGHT); }
            ctx.restore();
        }

        function gameLoop() { update(); draw(); if (isGameRunning) requestAnimationFrame(gameLoop); }

        document.getElementById('loginBtn').addEventListener('click', startGame);
        document.getElementById('restartBtn').addEventListener('click', startGame);
        
        document.getElementById('gameOverTopupBtn').addEventListener('click', () => {
            document.getElementById('gameOverScreen').classList.add('hidden');
            document.getElementById('topUpModal').classList.remove('hidden');
        });

        document.getElementById('buyMeCoffeeBtn').addEventListener('click', () => { window.open('https://buymeacoffee.com/surwin', '_blank'); });

        // Ã–DÆNÄ°ÅÄ° YOXLA - BONUS MÆNTÄ°QÄ°
        document.getElementById('verifyPaymentBtn').addEventListener('click', (e) => {
            const btn = e.currentTarget; 
            btn.innerHTML = `â³ ...`; 
            btn.disabled = true;
            
            setTimeout(() => {
                let bonusClaimed = localStorage.getItem('premiumDriveBonusClaimed') === 'true';
                
                // Ä°lk dÉ™fÉ™ kliklÉ™dikdÉ™ 0.50 AZN verir
                if (!bonusClaimed) {
                    balanceAZN += 0.50;
                    localStorage.setItem('premiumDriveBonusClaimed', 'true');
                    updateUI();
                    playSuccessSound();
                    
                    btn.innerHTML = `âœ… + ${formatMoney(0.50)} Bonus!`; 
                    btn.classList.replace('text-emerald-400', 'text-white'); 
                    btn.classList.replace('bg-emerald-500/10', 'bg-emerald-600');
                    
                    setTimeout(() => { 
                        document.getElementById('topUpModal').classList.add('hidden'); 
                        btn.innerHTML = `ğŸ”„ ${LANGUAGES[currentLang].t.btnVerify}`; 
                        btn.disabled = false; 
                        btn.classList.replace('text-white', 'text-emerald-400'); 
                        btn.classList.replace('bg-emerald-600', 'bg-emerald-500/10'); 
                    }, 2000);
                } else {
                    // ÆgÉ™r bonus artÄ±q alÄ±nÄ±bsa, É™sl Ã¶dÉ™niÅŸ yoxlamasÄ± simulyasiyasÄ± gedir (XÆTA verir)
                    btn.innerHTML = `âŒ Error`; 
                    btn.classList.replace('text-emerald-400', 'text-rose-400'); 
                    btn.classList.replace('bg-emerald-500/10', 'bg-rose-500/10');
                    
                    setTimeout(() => { 
                        btn.innerHTML = `ğŸ”„ ${LANGUAGES[currentLang].t.btnVerify}`; 
                        btn.disabled = false; 
                        btn.classList.replace('text-rose-400', 'text-emerald-400'); 
                        btn.classList.replace('bg-rose-500/10', 'bg-emerald-500/10'); 
                    }, 3000);
                }
            }, 1500);
        });

        const toggleModal = (btnId, modalId, show) => document.getElementById(btnId).addEventListener('click', () => { document.getElementById(modalId).classList[show ? 'remove' : 'add']('hidden'); updateUI(); if(show && modalId==='garageModal') renderGarage(); });
        toggleModal('loginTopupBtn', 'topUpModal', true); toggleModal('topupBtn', 'topUpModal', true); toggleModal('closeTopUpBtn', 'topUpModal', false);
        toggleModal('withdrawBtn', 'withdrawModal', true); toggleModal('closeWithdrawBtn', 'withdrawModal', false);
        toggleModal('garageBtn', 'garageModal', true); toggleModal('closeGarageBtn', 'garageModal', false);

        const brakeBtn = document.getElementById('brakeBtn');
        const startBraking = (e) => { e.preventDefault(); isBraking = true; }; const stopBraking = (e) => { e.preventDefault(); isBraking = false; };
        brakeBtn.addEventListener('mousedown', startBraking); brakeBtn.addEventListener('mouseup', stopBraking); brakeBtn.addEventListener('touchstart', startBraking, {passive: false}); brakeBtn.addEventListener('touchend', stopBraking, {passive: false});
        
        const goLeft = (e) => { e.preventDefault(); if(gameState.targetX > LANES[0] - CAR_WIDTH/2) gameState.targetX -= 100; };
        const goRight = (e) => { e.preventDefault(); if(gameState.targetX < LANES[2] - CAR_WIDTH/2) gameState.targetX += 100; };
        document.getElementById('laneLeft').addEventListener('mousedown', goLeft); document.getElementById('laneLeft').addEventListener('touchstart', goLeft, {passive: false});
        document.getElementById('laneRight').addEventListener('mousedown', goRight); document.getElementById('laneRight').addEventListener('touchstart', goRight, {passive: false});

        initLanguage();
        if(isRegistered) updateUI();

    </script>
</body>
</html>
